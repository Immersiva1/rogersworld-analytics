var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,i=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,s=(e,t)=>{for(var o in t||(t={}))r.call(t,o)&&i(e,o,t[o]);if(n)for(var o of n(t))d.call(t,o)&&i(e,o,t[o]);return e},a=(e,n)=>t(e,o(n));!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const c=e=>{const{prefix:t=[],track:o,stickyContext:n}=e;return e=>{const{name:r,requiredContext:d=[],optionalContext:i=[]}=e,s=[t,r].flat();return Object.assign(((e={})=>{const t=((e,t={},o=[],n=[])=>{const r={};return o.forEach((o=>{var n;const d=null!=(n=t[o])?n:e[o];if(void 0===d)throw new Error("Required context missing: "+o);r[o]=d})),n.forEach((o=>{var n;r[o]=null!=(n=t[o])?n:e[o]})),r})(n,e,d,i);o(s,t)}),{recordingName:s,requiredContext:d,optionalContext:i})}},m=["userId","userEmail","userName"],p=e=>{const{Page:t,Event:o,saveContext:n}=(e=>{const{prefix:t,provider:{trackPageView:o,trackEvent:n},stickyContext:r={}}=e;return{saveContext:e=>Object.assign(r,e),Page:c({prefix:t,stickyContext:r,track:o}),Event:c({prefix:t,stickyContext:r,track:n})}})({provider:e,prefix:"Web App"});return{saveContext:n,pages:{home:t({name:"Home"}),auth:t({name:"Auth"}),payment:t({name:"Payment",requiredContext:m})},events:{auth:{signedUp:o({name:["Auth","Signed Up"],requiredContext:m}),loggedIn:o({name:["Auth","Logged In"],requiredContext:m}),loggedOut:o({name:["Auth","Logged Out"],requiredContext:m}),canceled:o({name:["Auth","Canceled"]}),required:o({name:["Auth","Required"],requiredContext:["episodeId"]})},payment:{required:o({name:["Payment","Required"],requiredContext:m}),completed:o({name:["Payment","Completed"],requiredContext:m})},episode:{detailsViewed:o({name:["Episode","Details Viewed"],requiredContext:["episodeId"],optionalContext:m})},device:{connected:o({name:["Device","Connected"],requiredContext:["roomId","episodeId","deviceId"]}),disconnected:o({name:["Device","Disconnected"],requiredContext:["roomId","episodeId","deviceId"]})},room:{created:o({name:["Room","Created"],requiredContext:["roomId","episodeId",...m]}),exited:o({name:["Room","Exited"],requiredContext:["roomId","episodeId",...m]}),backToAllEpisodes:o({name:["Room","Back to All Episodes"],requiredContext:["roomId","episodeId",...m]}),joined:o({name:["Room","Joined"],requiredContext:["roomId","episodeId","deviceId","playerId"],optionalContext:["playerAge"]}),episodeStarted:o({name:["Room","Episode Started"],requiredContext:["roomId","episodeId",...m]}),episodeCompleted:o({name:["Room","Episode Completed"],requiredContext:["roomId","episodeId",...m]})},scene:{started:o({name:["Scene","Started"],requiredContext:["sceneId","roomId","episodeId",...m]}),completed:o({name:["Scene","Completed"],requiredContext:["sceneId","roomId","episodeId",...m]}),skipped:o({name:["Scene","Skipped"],requiredContext:["sceneId","roomId","episodeId",...m]}),video:{segmentStarted:o({name:["Scene","Video","Segment Started"],requiredContext:["roomId","episodeId","sceneId","videoId","timestamp",...m]}),segmentCompleted:o({name:["Scene","Video","Segment Completed"],requiredContext:["roomId","episodeId","sceneId","videoId","timestamp",...m]}),autoplayPrevented:o({name:["Scene","Video","Autoplay Prevented"],requiredContext:["roomId","episodeId","sceneId","videoId"]}),paused:o({name:["Scene","Video","Paused"],requiredContext:["roomId","episodeId","sceneId","videoId","timestamp"]}),resumed:o({name:["Scene","Video","Resumed"],requiredContext:["roomId","episodeId","sceneId","sceneIndex","scenesRemaining","sceneProgress","videoId","timestamp"]}),looped:o({name:["Scene","Video","Looped"],requiredContext:["roomId","episodeId","sceneId","videoId"]})},prompt:{answered:o({name:["Scene","Prompt","Answered"],requiredContext:["roomId","episodeId","sceneId","answer","playerId","deviceId","asGroup"]})},multipleChoice:{answered:o({name:["Scene","Multiple Choice","Answered"],requiredContext:["roomId","episodeId","sceneId","answer","playerId","deviceId","asGroup"]})},buttonPrompt:{pressed:o({name:["Scene","Button Prompt","Pressed"],requiredContext:["roomId","episodeId","sceneId","playerId","deviceId","asGroup"]})},timer:{started:o({name:["Scene","Timer","Started"],requiredContext:["roomId","episodeId","sceneId"]}),ended:o({name:["Scene","Timer","Ended"],requiredContext:["roomId","episodeId","sceneId"]})}}}}},u=e=>{const t=a(s({},e),{email:e.userEmail});return a(s({},t),{acValue:JSON.stringify(t)})};function l(e=globalThis.analytics){let t=!1;return{trackEvent:(o,n={})=>{n.userId&&!t&&(e.identify(n.userId,{email:n.userEmail,name:n.userName}),t=!0),e.track([o].flat().join(" _ "),u(n))},trackPageView:(t,o={})=>{const n=[t].flat();e.page(n.slice(0,-1).join(" _ "),n.slice().pop(),u(o))}}}const I=document.querySelector("#docs"),C=document.getElementById("test-button"),x=(f=window.analytics,{app:p(l(f))});var f;C.addEventListener("click",(()=>{x.app.events.room.created({roomId:"__MOCK_ROOM_ID__",episodeId:"__MOCK_EPISODE_ID__",userId:"__MOCK_USER_ID__",userEmail:"mockuser@rogersworld.tv",userName:"Mock User"})}));const g=(e,t=["analytics"],o=I)=>{if("function"==typeof e)return;const n=t.length;Object.entries(e).forEach((([e,r])=>{if("function"==typeof r){if("requiredContext"in r==!1)return;const n=document.createElement("div"),d=r.requiredContext.map((e=>`<em>${e}</em>`)).concat(r.optionalContext).join(",<br />&nbsp;&nbsp;");n.innerHTML=`\n              <p class="name">${r.recordingName.join(" / ")}</p>\n              <p class="signature">\n                <span class="method">${t.concat(e).join(".")}(${d?`<span class="properties">{<br />&nbsp;&nbsp;${d}<br />}</span>`:""})</span></p>\n            `,o.appendChild(n)}else{const d=document.createElement("div"),i=document.createElement(`h${n+2}`);d.classList.add("sub"),i.innerText=e,d.appendChild(i),o.appendChild(d),g(r,t.concat(e),d)}}))};g(x);
